language: node_js
addons:
  apt:
    packages:
    - sshpass
node_js:
  - 8
branchs:
  only:
  - master  #指定只有检测到master分支有变动时才执行任务
script:
  - export SSHPASS=$DEPLOY_PASS
  - npm install cnpm --registry=https://registry.npm.taobao.org
  - cnpm install
  - npm run build
  - sshpass -e scp  -o stricthostkeychecking=no -r dist root@47.98.240.154:/var/www/html/fancy
env:
  global:
  - secure: q1x8+azHMpeN2OpKuf5mn6sLrhEEQv6670MUaoTBF8V7je8HBY/A/dqt8cqatl/IOLudXNvZ53RHEM3RNyB2EgjRwy8nr3RM5dX7cdHN5Z/ydzIMP0wkIBSzBhDAD2rMZtiB2DTNOF07bcn/eVQrV3C9PrUtvQvyju9OFq1OwXa9fiDnDD/8rFithSj/A88p6wuF7AS/7w42rmh8gqbY3iYX+3UX2faAX+JZCnWuU7Wuy8ZUyNSFaEmT36chr3UziwmtfJHZy7t13SiBgMuqpScHe/YKx567kR4Kz4zKtz5V5PX0b9jAQ8uLTuUiq7ua+mRKhboE9izLgNr02asknWZ5dFABdvu7IWmv4GseGufOZwBACSqhbQYiAEabMXD9G6D+oC9dv2W/rKn7PnGhHsfyx5GOiRP0EaTdfsXHDq+dQeF+0tiLwLfKp7AyB7QTG+XrK6nzhWXzaUmsQq9TCqplFzUpT3d2n8PLFPPKJwmz6pGGs7GBTQc2ww9Rzk68eLXYddhnCfHb4LZhS5rIF8/pSYSppl2oLp72v6RMJEsOO1Bkom0iAR4/iltg4Wh1lPf7IlupPpxb5IgHoKXqUZeXv+TtcjiYDD/oQWScETbD9IaRvK5mdZHOl0qzxsp3BShT4wiiOk3Dt+zL93osi9o61zm0Td+eazfXDfdsB24=
  - secure: BhzQKNj2ns64rLsWib9CfYCVWvd5ioUala0V7g9lDWoyu+DAtbfUNSrLdQpt95Ax9Veh2r2KXxSyZzpE19bAtDgssK9+5v/7omdlD/nkZ19TLOxrsCa47sVSy/uLffgwqK0wUUOtI/LRe/QWmO8sQ/QB/L7QnzOpIMf5ppQCMj7Z1+0xla0L1CopCaXQ2amJ4vZezPXCeCPfsiOGLI4fFNWLJTfMRFgOh7IdErNUGlr65VnZKeWFHB6YJKLNeXxK9NpBpQ22kxQ7QLQPiY0+eLzjyomJGnOCV8xeYsg5ZWVG5735/30ecVulxb2NQsdC+LKeX3JOfJig593lxN58sYb+MdArUDhy/596jVoqSSOJ7VZrzzhSK6O/yV1K/sMHqvwQ//yIuUYh6LTveCLExCu9qyIFl7VILnk8lIAXYQ03TEkQ9oXu9HmylREpCKKnEdVI0ej5hGrRYnL3fhtWlygr/sJZ1geD2vyaQ8Lr/UAqvCHz6J96Gh+x1gWQv5dS3hWYnPnGaGXnwor8vL+Vmd0ef5pexi8+srRm7owoLGOE1wZQOaDVtEbWq8DNa2zgQhrkt2yAJ3LiaZW+bPK3syD44ICLBs2bIxx1ogYaONqCSrwcYhWeVxtHZnuVqL5H/Bc0OdoQk1finaFeeYFxKHB0LePIi21CIENEjIOhr7s=